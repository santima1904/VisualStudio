<Page
    x:Class="CRUD_Personas_UWP.Views.Departamentos"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:CRUD_Personas_UWP.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="using:CRUD_Personas_UWP.ViewModels"
    mc:Ignorable="d"
    Background="#FEF5E7">

    <Page.DataContext>
        <vm:DepartamentosVM/>
    </Page.DataContext>

    <RelativePanel>
        <CommandBar x:ConnectionId='2' x:Name="commandbar" RelativePanel.AlignTopWithPanel="True" RelativePanel.AlignLeftWithPanel="True" OverflowButtonVisibility="Collapsed" Background="#FAD7A0">
            <AppBarButton Icon="Add" Command="{Binding AnhadirCommand}"/>
            <AppBarButton Icon="Edit" Command="{Binding EditarCommand}"/>
            <AppBarButton Icon="Delete" Command="{Binding BorrarCommand}"/>
        </CommandBar>
        <AppBarButton Margin="30,10,30,20" Background="#FAD7A0" Icon="Save" Command="{Binding GuardarCommand}" RelativePanel.Below="commandbar"
                      RelativePanel.RightOf="btnFind" Visibility="{Binding VisibilityAnhadir}"/>
        <AppBarButton Margin="30,10,30,20" Background="#FAD7A0" Icon="Save" Command="{Binding GuardarCommand}" RelativePanel.Below="commandbar"
                      RelativePanel.RightOf="btnFind" Visibility="{Binding VisibilityEditar}"/>
        <TextBox x:ConnectionId='3' x:Name="txbbarraBusqueda" RelativePanel.Below="commandbar" RelativePanel.AlignLeftWithPanel="True" 
                      MinWidth="150" VerticalAlignment="Center" Margin="40,20,0,10"
                      Text="{Binding TxbBarraBusqueda, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
        <AppBarButton x:ConnectionId='4' x:Name="btnFind" Icon="Find" Command="{Binding BuscarCommand}" RelativePanel.Below="commandbar" RelativePanel.RightOf="txbbarraBusqueda"
                      Margin="0,15,0,0"/>
        <ListView x:ConnectionId='5' x:Name="lstLista" ItemsSource="{Binding ListadoDepartamentosOfrecido, Mode=TwoWay}" SelectedItem="{Binding DepartamentoSeleccionado, Mode=TwoWay,
            UpdateSourceTrigger=PropertyChanged}"  RelativePanel.AlignLeftWithPanel="True" RelativePanel.AlignBottomWithPanel="True"
            RelativePanel.Below="txbbarraBusqueda" ScrollViewer.VerticalScrollBarVisibility="Visible" Margin="20">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Nombre, Mode=TwoWay}" Margin="10, 0"/>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <Grid x:ConnectionId='6' x:Name="grdFormulario" RelativePanel.RightOf="lstLista"  RelativePanel.AlignRightWithPanel="True" RelativePanel.Below="txbbarraBusqueda" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*" MinWidth="150"/>
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Margin="10" HorizontalTextAlignment="Right">Nombre:</TextBlock>

            <TextBlock x:ConnectionId='7' x:Name="txtNombre"  Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2" Margin="10" Text="{Binding DepartamentoSeleccionado.Nombre}" TextWrapping="Wrap" Visibility="{Binding VisibilityDetalles}"/>
            <TextBox x:ConnectionId='8' x:Name="txbNombre"  Grid.Row="0" Grid.Column="1" Margin="10" Text="{Binding DepartamentoSeleccionado.Nombre, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TextWrapping="Wrap" Visibility="{Binding VisibilityAnhadir}"/>
            <TextBox x:ConnectionId='9' x:Name="txbNombreEditar"  Grid.Row="0" Grid.Column="1" Margin="10" Text="{Binding DepartamentoSeleccionado.Nombre, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" TextWrapping="Wrap" Visibility="{Binding VisibilityEditar}"/>
            <TextBlock Grid.Row="0" Grid.Column="2" Foreground="Red" Margin="10" Visibility="{Binding VisibilityCampoVacio, UpdateSourceTrigger=PropertyChanged}">Contenido vacío</TextBlock>
        </Grid>
    </RelativePanel>
</Page>

